# Step 1

1. Peers join the network.
2. The network structure is stored in each peer's data.
3. An initiator is selected using an algorithm.
4. Each initiator sends a zone membership request to neighboring peers.
5. If a peer accepts the zone membership request, an acceptance response is sent back to the initiator.
6. If a peer does not accept the zone membership request, an ignore response is sent back to the initiator, including the current peer's initiator and zone ID.
7. The peer also informs its own initiator about the neighboring peer, its initiator, and its zone.

# Step 2

1. Each initiator begins collecting data from the peers that have joined its zone.  
2. Data is exchanged through communication channels established during the zone membership process.  
3. Each peer in the zone sends its data to the initiator in a structured format.  
4. Once the initiator receives all the data from its zone members:  
   - It verifies the integrity and completeness of the data.  
   - It performs preprocessing on the data if required (e.g., cleaning, normalization).  
5. The initiator applies a clustering algorithm (e.g., K-Means, DBSCAN, or any other suitable algorithm) to the collected data.  
6. The clustering algorithm partitions the data into clusters based on similarity or other criteria defined in the algorithm.  
7. The resulting clusters are stored in the initiator's local data for further use.  

# Step 3

1. After the initiator has clustered the data, it begins selecting representatives from the peers whose data has been used in the clustering process.  
2. The initiator identifies peers that have their data included in each cluster.  
3. The initiator calls the **Representative Role Peer Service** for each candidate peer to inform them of the potential to become a representative.  
4. Each candidate peer, depending on local conditions and processing, decides whether to accept the representative role:  
   - If a peer accepts the representative role, it informs the initiator, and the announcement is no longer sent to other candidates for that cluster.  
   - If a peer rejects the representative role, the initiator will continue notifying other potential candidates in the cluster until a representative is chosen.  
5. Once a representative peer is selected for the cluster:  
   - It informs all other peers whose data was part of the cluster that it is now their representative.  
   - These peers acknowledge the new representative and update their local knowledge of the cluster's representative.  
6. The representative peer maintains its role and coordinates interactions with the peers in its cluster, managing communication and data sharing for the group.  

# Step 4

1. Each peer in the network uses its unique identifier (such as IP and Port) to determine if it can act as an initiator.  
2. The initiator selection process involves the following:  
   - A unique identifier string is generated by combining the IP and Port (e.g., `192.168.1.1:8080`).  
   - This identifier is hashed using the SHA-256 algorithm to create a unique numeric value.  
   - The numeric value is divided by a predefined group size (e.g., 3 or 5), and the remainder is checked.  
   - If the remainder is zero, the peer is designated as an initiator; otherwise, it is not.  
3. Once the initiators are selected, each initiator sends an RPC membership proposal without requiring an immediate response to every peer in the network.  
4. Each peer, upon receiving the membership proposal, checks if it has already received a membership proposal from another initiator:
   - **If the peer has not received a membership proposal from another initiator:**  
     The peer calls a service on the proposing initiator to confirm its membership and sends its data required by the initiator.  
   - **If the peer has already received a membership proposal from another initiator:**  
     - The peer calls a service on the proposing initiator to reject the proposal and sends the contact information of its current initiator.  
     - The peer also calls a service on its current initiator to provide the contact information of the new proposing initiator, ensuring both initiators are aware of each other and can establish communication if needed.  
5. Peers send responses to the initiators:
   - An acceptance response indicates the peer is willing to join the zone.  
   - An ignore response provides information about the peer's existing initiator and zone ID.  
6. If a peer ignores a zone membership request, it also informs its own initiator about the situation, including details about the neighboring peer and its zone information.  


# Step 5

1. After collecting data from all peers in the zone, the initiator performs clustering using the Affinity Propagation algorithm. 
2. Multiple clusters are generated for the zone based on the data from participating peers (including the initiator itself). Each cluster is explicitly associated with the peers whose data contributed to it. 
3. For each cluster, the initiator selects one participating peer as the cluster representative using a predefined selection algorithm (to be specified later). 
4. The initiator sends the following information to the newly selected cluster representative:
   - The average/aggregated data of the cluster. 
   - The list of peers whose data contributed to the cluster.
5. The designated cluster representative then:
   - Establishes direct communication channels with all peers in its cluster.
   - Announces itself as the official representative to these peers.
6. Participating peers in the cluster:
   - Acknowledge the representative's role.
   - Update their local records to reflect their cluster membership and representative association.