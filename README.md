# DFL with P2PSimS

...

## Simple Run in apps/dfl

Create a `.env` file and fill it with your desired global configurations described in the next section; for example:

```dotenv
FAIR_SPREAD_ON_GPUS=true
NODES_COUNT=10
MODEL=2NN
DATA=MNIST
DATA_DISTRIBUTION=pretty-non-IID-5
INITIAL_PEERS=rgg
PEERS_SELECTION=top-1-0.0-seq
SEARCH_DATA=params-grads-top-0.12
ROUNDS=10
```

Then,

```shell
./compose.sh up -d
```

To force exit and properly cleanup the deployment,

```shell
./compose.sh down --remove-orphans -t 0
```

## Configurations

> See the [`.env.example`](./.env.example) file for an example of all the available environment variables.

| Name                              | Scope      | Default                                                                                                                                                              | Supported Values                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | Description                                                                                                                                                                     |
|-----------------------------------|------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `NAME`                            | Local      | Network hostname                                                                                                                                                     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |                                                                                                                                                                                 |
| `GLOBAL_RANDOM_SEED`              | Global (*) | `42`                                                                                                                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |                                                                                                                                                                                 |
| `NODE_GLOBAL_RANDOM_SEED`         | Global (*) | `GLOBAL_RANDOM_SEED`                                                                                                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |                                                                                                                                                                                 |
| `INDEX`                           | Local      | The first number inside `NAME`.                                                                                                                                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |                                                                                                                                                                                 |
| `NODES_COUNT`                     | Global (*) | `10`                                                                                                                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |                                                                                                                                                                                 |
| `DATA_DISTRIBUTION`               | Global (*) | `stratified`                                                                                                                                                         | `stratified`, `one-ten`, `iid`, `non-iid-k` (`k` is the labels count per node), `pretty-non-iid-k` (`k` is the the number of groups of similar data distribution), `fixed-0=0-1/3,1=0-1/3,2=0-1/3` (see [`./fixed_data_dist_env_gen.py`](./fixed_data_dist_env_gen.py)), `non-iid-strict-label-dir-a` (`a` is the Dirichlet's alpha parameter), `non-iid-label-dir-a-m` (`a` is the Dirichlet's alpha parameter; `m` is the minimum required partition size, defaults to `10`), `non-iid-strict-label-dir` (same as `non-iid-strict-label-dir-0.5`), `non-iid-label-dir` (same as `non-iid-label-dir-0.5`), `iid-strict-dir-quantity-a` (`a` is the Dirichlet's alpha parameter), `iid-dir-quantity-a` (`a` is the Dirichlet's alpha parameter), `iid-strict-dir-quantity` (same as `iid-strict-dir-quantity-0.5`), `iid-dir-quantity` (same as `iid-dir-quantity-0.5`), `prepared-file`, `all`, `pathological-non-iid-k` (`k` is the number of labels per partition/split)                                                                     |                                                                                                                                                                                 |
| `DATA`                            | Global (*) | `MNIST`                                                                                                                                                              | `MNIST`, `CIFAR10`, `EMNIST` (same as `EMNIST-byclass`), `EMNIST-byclass`, `EMNIST-bymerge`, `EMNIST-balanced`, `EMNIST-letters`, `EMNIST-digits`, `EMNIST-MNIST` (same as `MNIST` in theory), `FMNIST`, `CIFAR100`, `FEMNIST` (should only be used with `DATA_DISTRIBUTION=all`)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                                                                                                                                                                                 |
| `MODEL`                           | Global     | `1NN`                                                                                                                                                                | `1NN`, `2NN`, `CNN`, `ResNet18`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |                                                                                                                                                                                 |
| `ROUNDS`                          | Global (*) | `10`                                                                                                                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |                                                                                                                                                                                 |
| `SIMILARITY`                      | Global (*) | `cosine`                                                                                                                                                             | `cosine`, `euclidean`, `cosine-raw`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |                                                                                                                                                                                 |
| `CLUSTERING`                      | Global (*) | `affinity-propagation` (uses cosine affinity if `SIMILARITY` is `cosine`, Euclidean affinity if `SIMILARITY` is `euclidean`)                                         | `affinity-propagation`, `affinity-propagation-euclidean`, `affinity-propagation-cosine`, `kmeans-k`, `kmedoids-k-cosine`, `kmedoids-k-euclid`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |                                                                                                                                                                                 |
| `PEERS_SELECTION`                 | Global (*) | `ideal-top-k` where `k` is `max(NODES_COUNT/3, 1)`                                                                                                                   | `everyone`, `no-one`, `ideal-top-k` (`k` is how many peers to aggregate with), `min-similarity-m` (`m` is the minimum similarity value), `uniform-random-k` (`k` is how many peers to select), `top-k-m` (`k` is how many peers to search for; `m` is the minimum similarity value), `top-k-m-seq` (`k` is how many peers to search for; `m` is the minimum similarity value), `initial-peers`, `parallel-topk-isotonic-k=10-M=100-h=7-decay=lin-augment=false-adecay=false` (`k` is the preferred/maximum number of peers to aggregate with; `M` is the practical infinity value when the minimum similarity is `0`; `h` is the maximum points' history length to fit the isotonic regression on (defaults to infinity); `decay` can be `lin` or `none` (defaults to `lin`); `augment=false` (default to `false`); `adecay` is the active decay (defaults to `false`; must be used with `decay`)), `par-topk-lin-reg-k=10-init=0.5-decay=lin-hist=7`, `par-topk-ideal-th-k=7` (`k` is the preferred/maximum number of peers to aggregate with) |                                                                                                                                                                                 |
| `EPOCHS`                          | Global (*) | `1`                                                                                                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |                                                                                                                                                                                 |
| `BATCH_SIZE`                      | Global (*) | `100`                                                                                                                                                                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |                                                                                                                                                                                 |
| `LR`                              | Global (*) | `1e-3`                                                                                                                                                               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |                                                                                                                                                                                 |
| `SEARCH_DATA`                     | Global (*) | `params`                                                                                                                                                             | `params`, `grads`, `params-top-p` (`p` is the fraction of the parameters to extract), `grads-top-p` (`p` is the fraction of gradients to extract), `params-grads-top-p` (`p` is the fraction of gradients and parameters to extract)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |                                                                                                                                                                                 |
| `INITIAL_PEERS`                   | Global (*) | `everyone`                                                                                                                                                           | `everyone`, `rgg`, `erg`, `rst`, `bag`, `wsg`, `list-n0,n1,n2` (a simple list), `bag-m` (`m` is an argument of the BAG method), `wsg-k-p` (`k` and `p` are arguments of the WSG method), `no-one`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                                                                                                                                                                                 |
| `DEVICE`                          | Local      | `cuda` if available, else `cpu`                                                                                                                                      | `cuda`, `cpu`, any value supported by `torch.device` function                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |                                                                                                                                                                                 |
| `PREFERRED_ZONE_SIZE`             | Global (*) | `max(NODES_COUNT/3, 2)`                                                                                                                                              |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |                                                                                                                                                                                 |
| `FAIR_SPREAD_ON_GPUS`             | Global     | `false`                                                                                                                                                              | `true` (or `1`, `True`, `y`, `yes`, `tRuE`, `yEs`), `false` (or anything not true)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | Only synthesized through `./compose-gen/main.py`. Counts all the available GPUs and evenly/fairly spreads nodes on them (trough `torch.device`, e.g. `torch.device('cuda:1')`). |
| `SIMULATE_LATENCIES`              | Global (*) | `none`                                                                                                                                                               | `initial-peers` (random latency for immediate/neighboring peers, then shortest paths' lengths for all to all), `initial-peers-local` (random latency for immediate/neighboring peers), `none`, `all-random`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |                                                                                                                                                                                 |
| `SIMULATE_LATENCIES_RANDOM_RANGE` | Global (*) | `10,100`                                                                                                                                                             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |                                                                                                                                                                                 |
| `RUN_NAME`                        | Global (*) | Current date-time (only through `./compose.sh`)                                                                                                                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | Only synthesized through `./compose.yaml`. The directory name under `./runs/` to store the nodes' log files for the run.                                                        |
| `SEARCH_RENEW_ROUNDS`             | Global     | `1`                                                                                                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |                                                                                                                                                                                 |
| `ROUNDS_AGE`                      | Global (*) | `0` if set `SYNC_ROUNDS`; else, `SEARCH_RENEW_ROUNDS` if using a search-ful peers selection method; `1` otherwise. This conf. is ignored in CFL (see `CENTRALIZED`). |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |                                                                                                                                                                                 |
| `SKIP_BUILD`                      | Global     | `false`                                                                                                                                                              | Setting it equals to true, not/un setting it equals to false.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | Only synthesized through `./compose.sh`. Whether to skip the Compose gen Docker image build or not.                                                                             |
| `SKIP_GEN`                        | Global     | `false`                                                                                                                                                              | Setting it equals to true, not/un setting it equals to false.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | Only synthesized through `./compose.sh`. Whether to skip the Compose generation or not.                                                                                         |
| `GC_PER_ROUND`                    | Global (*) | `true`                                                                                                                                                               | `true` (or `1`, `True`, `y`, `yes`, `tRuE`, `yEs`), `false` (or anything not true)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | Whether to run the garbage collector (including the CUDA empty cache) at the end of each round.                                                                                 |
| `PRENUP_ROUND`                    | Global (*) | `true`                                                                                                                                                               | `true` (or `1`, `True`, `y`, `yes`, `tRuE`, `yEs`), `false` (or anything not true)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | Whether to run the round #-1 (e.g. log the train/test and the similarities metrics before any train or aggregation) also known as the prenup round (a pun).                     |
| `SYNC_ROUNDS`                     | Global     | `true`                                                                                                                                                               | `true` (or `1`, `True`, `y`, `yes`, `tRuE`, `yEs`), `false` (or anything not true)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |                                                                                                                                                                                 |
| `DNSMASQ_CACHE_SIZE`              | Global     | `NODES_COUNT` or `10`                                                                                                                                                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |                                                                                                                                                                                 |
| `SEARCH_NO_PROBE_DURATION`        | Global (*) | `min(NODES_COUNT/3, 30)`                                                                                                                                             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | In seconds.                                                                                                                                                                     |
| `MONITOR_SIMILARITIES`            | Global     | `none` if `CENTRALIZED`; else, in case of using a similarity-based peers selection method, `n0` if syncing rounds else `split`; otherwise, `none`.                   | `n0`, `split`, `none`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |                                                                                                                                                                                 |
| `TRACE_RPCS`                      | Global (*) | `false`                                                                                                                                                              | `true` (or `1`, `True`, `y`, `yes`, `tRuE`, `yEs`), `false` (or anything not true)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |                                                                                                                                                                                 |
| `DATA_PIN_MEMORY`                 | Global (*) | `true`                                                                                                                                                               | `true` (or `1`, `True`, `y`, `yes`, `tRuE`, `yEs`), `false` (or anything not true)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |                                                                                                                                                                                 |
| `OPTIMIZER`                       | Global (*) | `adam`                                                                                                                                                               | `adam`, `sgd`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |                                                                                                                                                                                 |
| `OPTIMIZER_RESET`                 | Global (*) | `false`                                                                                                                                                              | `true` (or `1`, `True`, `y`, `yes`, `tRuE`, `yEs`), `false` (or anything not true)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |                                                                                                                                                                                 |
| `HOMO_MODEL_INIT`                 | Global (*) | `false`                                                                                                                                                              | `true` (or `1`, `True`, `y`, `yes`, `tRuE`, `yEs`), `false` (or anything not true)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |                                                                                                                                                                                 |
| `TORCH_INTRA_OP_THREADS`          | Global (*) | PyTorch's default.                                                                                                                                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |                                                                                                                                                                                 |
| `TORCH_INTER_OP_THREADS`          | Global (*) | PyTorch's default.                                                                                                                                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |                                                                                                                                                                                 |
| `ASYNCIO_IO_THREADS`              | Global (*) | AsyncIO's default.                                                                                                                                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |                                                                                                                                                                                 |
| `MAX_ZONE_SIZE`                   | Global (*) | `PREFERRED_ZONE_SIZE`                                                                                                                                                | `0` or any negative value for disabling it; or any positive number for enabling it.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |                                                                                                                                                                                 |
| `PREPARE_DATA_DISTRIBUTION`       | Global     | Unset.                                                                                                                                                               | Any non-empty value means set.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | Only synthesized through `./compose.sh` and `./compose-gen/main.py`.                                                                                                            |
| `CENTRALIZED`                     | Global     | `false`                                                                                                                                                              | `true` (or `1`, `True`, `y`, `yes`, `tRuE`, `yEs`), `false` (or anything not true)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |                                                                                                                                                                                 |
| `CENTRALIZED_AGGREGATOR`          | Global (*) | `FedAvg`                                                                                                                                                             | `FedAvg`, `clustering`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |                                                                                                                                                                                 |
| `LR_DECAY`                        | Global (*) | -                                                                                                                                                                    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |                                                                                                                                                                                 |
| `AGGREGATOR_DEVICE`               | Global (*) | `DEVICE`                                                                                                                                                             | Same as `DEVICE`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                                                                                                                                                                                 |
| `SYNC_INIT_GRPC_SERVER`           | Global     | `true`                                                                                                                                                               | `true` (or `1`, `True`, `y`, `yes`, `tRuE`, `yEs`), `false` (or anything not true)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |                                                                                                                                                                                 |
| `SYNC_EXIT`                       | Global     | `true`                                                                                                                                                               | `true` (or `1`, `True`, `y`, `yes`, `tRuE`, `yEs`), `false` (or anything not true)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |                                                                                                                                                                                 |
| `DATA_DISTRIBUTION_NODES_COUNT`   | Global (*) | `NODES_COUNT`                                                                                                                                                        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |                                                                                                                                                                                 |
| `TRAIN_BATCH_DROP_LAST`           | Global (*) | `false`                                                                                                                                                              | `true` (or `1`, `True`, `y`, `yes`, `tRuE`, `yEs`), `false` (or anything not true)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |                                                                                                                                                                                 |
| `DATA_DEL_SPLITS`                 | Global (*) | `true`                                                                                                                                                               | `true` (or `1`, `True`, `y`, `yes`, `tRuE`, `yEs`), `false` (or anything not true)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |                                                                                                                                                                                 |
| `DATA_DEL_ALL`                    | Global (*) | `true`                                                                                                                                                               | `true` (or `1`, `True`, `y`, `yes`, `tRuE`, `yEs`), `false` (or anything not true)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |                                                                                                                                                                                 |
| `SYNC_SON_INIT`                   | Global     | `true`                                                                                                                                                               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |                                                                                                                                                                                 |
| `FIRST_ROUND_TRAIN_EPOCHS`        | Global (*) | `EPOCHS`                                                                                                                                                             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |                                                                                                                                                                                 |
| `DATA_DOWNLOAD`                   | Global (*) | `false`                                                                                                                                                              | `true` (or `1`, `True`, `y`, `yes`, `tRuE`, `yEs`), `false` (or anything not true)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |                                                                                                                                                                                 |
| `TORCH_DET_CUDA`                  | Global (*) | `true`                                                                                                                                                               | `true` (or `1`, `True`, `y`, `yes`, `tRuE`, `yEs`), `false` (or anything not true)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |                                                                                                                                                                                 |
| `TORCH_DET_ALG`                   | Global (*) | `false`                                                                                                                                                              | `true` (or `1`, `True`, `y`, `yes`, `tRuE`, `yEs`), `false` (or anything not true)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |                                                                                                                                                                                 |
| `SON_DATA_DEVICE`                 | Global (*) | `cpu`                                                                                                                                                                | `cuda`, `cpu`, any value supported by `torch.device` function                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |                                                                                                                                                                                 |
| `STDERR_DEBUG_LOG`                | Global (*) | `true`                                                                                                                                                               | `true` (or `1`, `True`, `y`, `yes`, `tRuE`, `yEs`), `false` (or anything not true)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |                                                                                                                                                                                 |
| `DISABLE_CDFL`                    | Global     | `false`                                                                                                                                                              |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |                                                                                                                                                                                 |
| `SON_AGG`                         | Global (*) | Based on `SIMILARITY`: `mean-w-pnorm` in case of `cosine` and `cosine-raw`, `mean-w` in case of `euclidean`.                                                         | `mean`, `mean-w`, `mean-w-pnorm`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |                                                                                                                                                                                 |
| `L2`                              | Global (*) | `0`                                                                                                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |                                                                                                                                                                                 |

> "Global (*)" scope means that it was designed as a global configuration but can be leveraged as a local one (i.e. with differing values on each node) with careful considerations.

## Extras

- [On Tuning Learning Rate and Batch Size](./finetunes/lr-bs.md)